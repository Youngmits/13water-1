<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>历史战绩</title>
    <style type="text/css">
      .zhanji{

        text-align: center;
        position: absolute;
        left: 310px;
      }
      .img7{
              height: 700px;
              width: 1300px;
      }

       .tishi{
        border: solid black;
        border-width:2px;
        width: 160px;
        height: 40px;
        position: fixed;
        left: 1200px;
        top: 600px;
        font-size: 26px;
        font-family: 微软雅黑;
        text-align: center;
        border-radius:10px
      }

       .idd{
        border: solid black;
        border-width:2px;
        width: 85px;
        height: 40px;
        position: fixed;

        font-size: 26px;
        font-family: 微软雅黑;
        text-align: center;
        border-radius:10px
      }

      .b{
          width: 1000px;
          height:550px;
          overflow-y:scroll;
          overflow-x:hidden;
          margin-top:0%;
          margin-left:32%;

        }

      table.list {
        font-family: "楷体";
        font-size:22px;
        color:#333333;
        border-style:hidden;
        border-width: 1px;
        border-color: #999999;
        border-collapse: collapse;
        background-color: rgba(204,204,204,0.5);

        background-size:100% 100%;
        border-radius: 20px;
        margin-top:0%;
        margin-left:0%;
        text-align:center;
        position: relative;
        width:1000px;
        height:550px;
        }
      table.list th {
        border-width: 2px;
        padding: 8px;
        border-style: solid;
        border-color: #bbb8b8;
      }
      table.list td {

        border-width: 2px;
        padding: 8px;
        border-style: solid;
        border-color: #999999;
      }

    </style>


    <script src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js" type="text/javascript" charset="utf-8">
    </script>
    <script type="text/javascript">
           function history(){


            var name='Ephemeral';
            var psw='18705957512.';
            var data={
                "username":name,
                "password":psw
            }
            $.ajax({
                url:'http://api.revth.com/auth/login',
                type:'POST',
                data:JSON.stringify(data),
                headers:{
                    "Content-Type":"application/json"
                },
                success:function(data){
                    localStorage.setItem("token",data['data']['token']);
                    localStorage.setItem("userid",data['data']['user_id']);
                    //alert('登录成功');


                },
                error:function(data){
                    //alert("登录异常，请重试");
                }
            });





               var username = document.getElementById("player_id").value;
               $.ajax({
                url:'http://api.revth.com/history?player_id='+username+'&limit=100&page=1',
                type:'GET',
                dataType:'json',
                headers:{
                    'X-Auth-Token':localStorage.getItem('token')
                },
                success:function(data){
                    //alert("查询成功")
                    console.log(data);
                   // for(u in data) //data.data指的是数组，数组里是8个对象，i为数组的索引
             //   {
                    var tr1;
                    var tr2;
                    var tr3;
                    var tr4;
                    var tr5;
                    var tr6;
                    var tr7;
                    var tr8;
                    var tr9;
                    var tr10;
                    var tr11;
                    var tr12;
                    var tr13;
                    var tr14;
                    var tr15;
                    var tr16;
                    var tr17;
                    var tr18;
                    var tr19;
                    var tr20;
                   // tr='<td>'+data.data[i].id+'</td>'+'<td>'+data.data[i].card+'</td>' +'<td>'+data.data[i].score+'</td>'+'<td>'+data.data[i].timestamp+'</td>'
                    tr1='<td>'+data.data[1].id+'</td>'+'<td>'+data.data[1].card+'</td>' +'<td>'+data.data[1].score+'</td>'+'<td>'+data.data[1].timestamp+'</td>';

                    $("#table").append('<tr>'+tr1+'</tr>');
                    tr2='<td>'+data.data[2].id+'</td>'+'<td>'+data.data[2].card+'</td>' +'<td>'+data.data[2].score+'</td>'+'<td>'+data.data[2].timestamp+'</td>';
                    $("#table").append('<tr>'+tr2+'</tr>');
                    tr3='<td>'+data.data[3].id+'</td>'+'<td>'+data.data[3].card+'</td>' +'<td>'+data.data[3].score+'</td>'+'<td>'+data.data[3].timestamp+'</td>';
                    $("#table").append('<tr>'+tr3+'</tr>');
                    tr4='<td>'+data.data[4].id+'</td>'+'<td>'+data.data[4].card+'</td>' +'<td>'+data.data[4].score+'</td>'+'<td>'+data.data[4].timestamp+'</td>';
                     $("#table").append('<tr>'+tr4+'</tr>');
                     tr5='<td>'+data.data[5].id+'</td>'+'<td>'+data.data[5].card+'</td>' +'<td>'+data.data[5].score+'</td>'+'<td>'+data.data[5].timestamp+'</td>';
                     $("#table").append('<tr>'+tr5+'</tr>');
                    tr6='<td>'+data.data[6].id+'</td>'+'<td>'+data.data[6].card+'</td>' +'<td>'+data.data[6].score+'</td>'+'<td>'+data.data[6].timestamp+'</td>';
                     $("#table").append('<tr>'+tr6+'</tr>');;
                    tr7='<td>'+data.data[7].id+'</td>'+'<td>'+data.data[7].card+'</td>' +'<td>'+data.data[7].score+'</td>'+'<td>'+data.data[7].timestamp+'</td>';
                     $("#table").append('<tr>'+tr7+'</tr>');
                    tr8='<td>'+data.data[8].id+'</td>'+'<td>'+data.data[8].card+'</td>' +'<td>'+data.data[8].score+'</td>'+'<td>'+data.data[8].timestamp+'</td>';
                     $("#table").append('<tr>'+tr8+'</tr>');
                     tr9='<td>'+data.data[9].id+'</td>'+'<td>'+data.data[9].card+'</td>' +'<td>'+data.data[9].score+'</td>'+'<td>'+data.data[9].timestamp+'</td>';
                     $("#table").append('<tr>'+tr9+'</tr>');
                     tr10='<td>'+data.data[10].id+'</td>'+'<td>'+data.data[10].card+'</td>' +'<td>'+data.data[10].score+'</td>'+'<td>'+data.data[10].timestamp+'</td>';
                     $("#table").append('<tr>'+tr10+'</tr>');
                     tr11='<td>'+data.data[11].id+'</td>'+'<td>'+data.data[11].card+'</td>' +'<td>'+data.data[11].score+'</td>'+'<td>'+data.data[11].timestamp+'</td>';
                     $("#table").append('<tr>'+tr11+'</tr>');
                     tr12='<td>'+data.data[12].id+'</td>'+'<td>'+data.data[12].card+'</td>' +'<td>'+data.data[12].score+'</td>'+'<td>'+data.data[12].timestamp+'</td>';
                     $("#table").append('<tr>'+tr12+'</tr>');
                     tr13='<td>'+data.data[13].id+'</td>'+'<td>'+data.data[13].card+'</td>' +'<td>'+data.data[13].score+'</td>'+'<td>'+data.data[13].timestamp+'</td>';
                     $("#table").append('<tr>'+tr13+'</tr>');
                     tr14='<td>'+data.data[14].id+'</td>'+'<td>'+data.data[14].card+'</td>' +'<td>'+data.data[14].score+'</td>'+'<td>'+data.data[14].timestamp+'</td>';
                     $("#table").append('<tr>'+tr14+'</tr>');
                     tr15='<td>'+data.data[15].id+'</td>'+'<td>'+data.data[15].card+'</td>' +'<td>'+data.data[15].score+'</td>'+'<td>'+data.data[15].timestamp+'</td>';
                     $("#table").append('<tr>'+tr15+'</tr>');
                     tr16='<td>'+data.data[16].id+'</td>'+'<td>'+data.data[16].card+'</td>' +'<td>'+data.data[16].score+'</td>'+'<td>'+data.data[1].timestamp+'</td>';
                     $("#table").append('<tr>'+tr16+'</tr>');
                     tr17='<td>'+data.data[17].id+'</td>'+'<td>'+data.data[17].card+'</td>' +'<td>'+data.data[17].score+'</td>'+'<td>'+data.data[17].timestamp+'</td>';
                     $("#table").append('<tr>'+tr17+'</tr>');
                     tr18='<td>'+data.data[18].id+'</td>'+'<td>'+data.data[18].card+'</td>' +'<td>'+data.data[18].score+'</td>'+'<td>'+data.data[18].timestamp+'</td>';
                     $("#table").append('<tr>'+tr18+'</tr>');
                     tr19='<td>'+data.data[19].id+'</td>'+'<td>'+data.data[19].card+'</td>' +'<td>'+data.data[19].score+'</td>'+'<td>'+data.data[19].timestamp+'</td>';
                     $("#table").append('<tr>'+tr19+'</tr>');
                     tr20='<td>'+data.data[20].id+'</td>'+'<td>'+data.data[20].card+'</td>' +'<td>'+data.data[20].score+'</td>'+'<td>'+data.data[20].timestamp+'</td>';
                     $("#table").append('<tr>'+tr20+'</tr>')

             //   }

                },
                error:function(data){
                   // alert('查询失败，请重试');
                }
            });
        }

        //
        //  function login(){
        //     var name='Ephemeral';
        //     var psw='18705957512.';
        //     var data={
        //         "username":name,
        //         "password":psw
        //     }
        //     $.ajax({
        //         url:'http://api.revth.com/auth/login',
        //         type:'POST',
        //         data:JSON.stringify(data),
        //         headers:{
        //             "Content-Type":"application/json"
        //         },
        //         success:function(data){
        //             localStorage.setItem("token",data['data']['token']);
        //             localStorage.setItem("userid",data['data']['user_id']);
        //             alert('登录成功');
        //
        //
        //         },
        //         error:function(data){
        //             alert("登录异常，请重试");
        //         }
        //     });
        // }


     </script>



</head>
<body>
   <div class="zhanji">
      <img  src="背景图3.png" class="img7">
      <img  src="十三水图标.png" height="350" width="350" style="position:absolute;left:960px;top:450px;">
     <a style="font-family: 华文行楷;font-size: 75px; position:absolute; left:10px; top:20px;color: black">
       历史战绩
     </a>
   </div>


   <div>
<!--     <input class="tishi"  type="button" onclick="window.location.href='选择界面.html'"  style="position: absolute;left: 600px;top: 600px ;border-color: black;background-color:transparent" value="上一页"  />-->
<!--      <input class="tishi" type="button" onclick="login()" style="position:absolute; left:410px; top:230px;background-color:transparent" value="登录"  />-->

     <input class="tishi" type="button" onclick="window.location.href='对局详情.html'" style="position:absolute; left:410px; top:370px;background-color:transparent" value="对局详情"  />
     <input class="tishi" type="button" onclick="window.location.href='排行榜.html'" style="position:absolute; left:410px; top:300px;background-color:transparent" value="排行榜"  />
     <input class="tishi"  type="button" onclick="history()"  style="position: absolute;left: 410px;top:580px ;border-color: black;background-color:transparent" value="获取"  />
   </div>

<
   <div class="b">
       <table class="list" id="table" style="word-break:break-all; word-wrap:break-all;">
           <tr style ="height:5px;">
             <th> 战局ID </th> <th>出牌情况 </th> <th>分数变化</th><th>结算时间</th>
           </tr>
           <tr>
           </tr>

       </table>
   </div>


   <div>
     <a class="idd" type="text" style="position:absolute;top:510px;left:315px;background-color: transparent">
       用户ID
     </a>
     <input class="tishi" type="text"  id="player_id" placeholder="       " style="position:absolute; left:410px; top:510px;border-radius:10px ;background-color: transparent ">
   </div>


   <div>
      <a href="选择界面.html">
        <img src="返回图标.png" height=50px width=50px style="position:absolute;left:330px;top:640px;">
      </a>
   </div>

</body>
</html>
